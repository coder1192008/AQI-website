<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AQI Predictor</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
    body { font-family: 'Roboto', sans-serif; background: linear-gradient(to right, #a1c4fd, #c2e9fb); margin:0; padding:0; }
    .container { max-width: 800px; margin: 50px auto; background: #fff; padding: 30px; border-radius: 15px; box-shadow: 0 8px 20px rgba(0,0,0,0.2); animation: fadeIn 1s; }
    h1 { text-align:center; color: #333; }
    form { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 20px; }
    input[type=number] { padding:10px; border-radius:5px; border:1px solid #ccc; transition:0.3s; }
    input[type=number]:focus { border-color:#4CAF50; box-shadow: 0 0 5px rgba(76,175,80,0.5); }
    input[type=submit] { grid-column: span 3; padding:12px; background:#4CAF50; color:#fff; border:none; border-radius:5px; font-weight:bold; cursor:pointer; transition:0.3s; }
    input[type=submit]:hover { background:#45a049; }
    table { width: 100%; border-collapse: collapse; margin-top:20px; }
    th, td { border:1px solid #ddd; padding:8px; text-align:center; transition:0.3s; }
    th { background:#4CAF50; color:white; }
    tr:hover { background:#f1f1f1; }
    .error { color:red; font-weight:bold; text-align:center; margin-top:10px; }
    @keyframes fadeIn { from {opacity:0} to {opacity:1} }
</style>
</head>
<body>
<div class="container">
<h1>Air Quality Index Predictor</h1>
<form method="POST">
<input type="number" step="any" name="CO" placeholder="CO" required>
<input type="number" step="any" name="NO2" placeholder="NO2" required>
<input type="number" step="any" name="O3" placeholder="O3" required>
<input type="number" step="any" name="PM10" placeholder="PM10" required>
<input type="number" step="any" name="PM2.5" placeholder="PM2.5" required>
<input type="number" step="any" name="SO2" placeholder="SO2" required>
<input type="submit" value="Calculate AQI">
</form>

{% if data %}
    {% if data.error %}
        <p class="error">{{ data.error }}</p>
    {% else %}
        <h2>Results</h2>
        <p><strong>Dominant Pollutant:</strong> {{ data.dominant_pollutant }}</p>
        <p><strong>Final AQI:</strong> {{ data.final_aqi_interpolation }} ({{ data.final_category }})</p>
        <p><strong>Health Message:</strong> {{ data.health_message }}</p>
        <p><strong>Improvement Tip:</strong> {{ data.improvement_tip }}</p>

        <h3>Inputs</h3>
        <table>
            <tr><th>Pollutant</th><th>Value</th></tr>
            {% for key, value in data.inputs.items() %}
            <tr><td>{{ key }}</td><td>{{ value }}</td></tr>
            {% endfor %}
        </table>

        <h3>Interpolation Results</h3>
        <table>
            <tr><th>Pollutant</th><th>AQI</th><th>Category</th></tr>
            {% for key, value in data.interpolation_results.items() %}
            <tr><td>{{ key }}</td><td>{{ value.AQI }}</td><td>{{ value.Category }}</td></tr>
            {% endfor %}
        </table>

        <p><strong>ML Predicted AQI:</strong> {{ data.ml_predicted_aqi }}</p>
    {% endif %}
{% endif %}
</div>
</body>
</html>
